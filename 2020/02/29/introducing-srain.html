<!DOCTYPE html>
<html lang="en-US">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

        <script>
            var url = "https://srain.silverrainz.me/";
            if (confirm("This site have been migrated to " + url + ", jump to it?")) {
                window.location.replace(url);
            }
        </script>
        <link rel="icon" type="image/png" href="/assets/images/logo.png" />
        <!-- Bootstrap -->
        <link href="/assets/yeti/bootstrap.min.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
            <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->
        <link href="/assets/style.css" rel="stylesheet">

        <title>Srain - Modern IRC client written in GTK</title>
    </head>
    <body>
        <nav class ="navbar navbar-default navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand text-capitalize" href="/">
                        <img class="img-responsive oversize" alt="srain" src="/assets/images/logo.png">
                    </a>
                    <p class="navbar-text"><big>Srain</big></p>
                </div>
                <div id="navbar" class="navbar-collapse collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="/">Home</a></li>
                        <li><a href="/news">News</a></li>
                        <li><a href="http://doc.srain.im/en/latest/install.html">Download</a></li>
                        <li><a href="https://doc.srain.im">Documentation</a></li>
                        <li><a href="https://github.com/SrainApp/srain">Source code</a></li>
                    </ul>
                </div><!--/.nav-collapse -->
            </div>
        </nav>

        <header>
    <div class="container">
        <div class="page-header">
            <h1>Srain - Modern IRC Client written in GTK <small>29 Feb 2020</small></h1>
        </div>

        <div class="panel panel-default">
            <div class="panel-body">
                
                <a href="/tags.html#announcement"><span class="label label-info">#announcement</span></a>
                
            </div>
        </div>
    </div>
</header>

<main>
    <div class="container post-content">
        <p>Hi all, I am excited to introduce you to Srain: A modern IRC client written in GTK.</p>

<p>Srain is my personal project since 2016. I released its first stable version recently.
This project originated when I was new to IRC. At that time, I was active
on #archlinux-cn@freenode, learned how to live with Arch Linux.
There are many relay bots in the channel (from XMPP, telegram, Tox and etc).
At first I felt the channel was full of chaos:</p>

<ul>
  <li>Messages are usually separated into multiple lines which is inconvenient for reading (512 bytes limit of IRC message)</li>
  <li>You have to click the URL and switch to browser to see what it is (titlebot alleviates this problem)</li>
  <li>Messages sent by relay bot have various formats which make it hard to read</li>
</ul>

<p>In fact, none of thes are problems for experienced IRC users, but in another way,
The inconveniences of IRC actually exists, improving the experience of IRC
chatting is always good.</p>

<p>– So I wrote a client, and now introduce to you:</p>

<div data-theme="default" data-height="" data-width="400" data-github="SrainApp/srain" class="github-card"></div>
<script src="//cdn.jsdelivr.net/github-cards/latest/widget.js"></script>

<ul id="markdown-toc">
  <li><a href="#free-and-cross-platform" id="markdown-toc-free-and-cross-platform">Free and Cross-Platform</a></li>
  <li><a href="#modern-ui" id="markdown-toc-modern-ui">Modern UI</a></li>
  <li><a href="#themes" id="markdown-toc-themes">Themes</a></li>
  <li><a href="#features" id="markdown-toc-features">Features</a>    <ul>
      <li><a href="#url-preview" id="markdown-toc-url-preview">URL Preview</a></li>
      <li><a href="#command-system" id="markdown-toc-command-system">Command System</a></li>
      <li><a href="#message-filter-and-renderer" id="markdown-toc-message-filter-and-renderer">Message Filter and Renderer</a></li>
    </ul>
  </li>
  <li><a href="#next-development" id="markdown-toc-next-development">Next development</a>    <ul>
      <li><a href="#use-experience-improvement" id="markdown-toc-use-experience-improvement">Use Experience Improvement</a></li>
      <li><a href="#plugin-system" id="markdown-toc-plugin-system">Plugin System</a></li>
      <li><a href="#energy-and-time" id="markdown-toc-energy-and-time">Energy and Time</a></li>
    </ul>
  </li>
</ul>

<h2 id="free-and-cross-platform">Free and Cross-Platform</h2>

<p>Srain is fully open source under GPLv3 license.
You can get software and <a href="https://github.com/SrainApp/srain">source code</a> for free.
Srain supports both Linux, Windows, BSD and macOS, please checkout
<a href="http://doc.srain.im/en/latest/install.html">Installation Guide</a> for more details.</p>

<blockquote>
  <p>For Linux user, Srain is available on offical repository of
<a href="https://flathub.org/apps/details/im.srain.Srain">flathub</a>,
<a href="https://src.fedoraproject.org/rpms/srain">fedora</a> and
<a href="https://software.opensuse.org/package/Srain">openSUSE</a>.</p>
</blockquote>

<h2 id="modern-ui">Modern UI</h2>

<p>Srain provides a modern graphical user interface which contains:</p>

<ul>
  <li>Easy to read message bubble</li>
  <li>Convenient popovers for join server and channel</li>
  <li>Optional <a href="https://wiki.gnome.org/Initiatives/CSD">Client-side Decoration</a></li>
  <li>HiDPI support</li>
  <li>Custom themes support (see below)</li>
</ul>

<p><img src="/assets/posts/2020-02-29-introducing-srain/main.png" /></p>

<h2 id="themes">Themes</h2>

<p>Srain’s theme is built on the top of GTK CSS system, so users can easily
customize the theme by writing CSS.</p>

<p>By default, Srain provides two
<a href="https://github.com/SrainApp/srain/tree/master/data/themes">builtin themes</a>:
<code class="language-plaintext highlighter-rouge">default-bubble</code> and <code class="language-plaintext highlighter-rouge">default-bubble-dark</code> which works well with most popular
GTK themes.</p>

<p><img src="/assets/posts/2020-02-29-introducing-srain/theme.png" /></p>

<h2 id="features">Features</h2>

<h3 id="url-preview">URL Preview</h3>

<p>Srain is able to parse the URL in IRC message, detect its content type and show you a preview.</p>

<p>For now, only HTTP URL which points to image can be previewed.</p>

<blockquote>
  <p>For convenience, the URL preview function is enabled by default.
Note that it may <strong>leaks your client IP</strong>, you can disable it in
<a href="http://doc.srain.im/en/stable/config.html">configuration</a>.</p>
</blockquote>

<h3 id="command-system">Command System</h3>

<p>Like most IRC clients, Srain provides a command system.
Most operations can be done through both GUI and commands.
Please refers to <a href="http://doc.srain.im/en/stable/commands.html">Commands Manual</a>
for more details.</p>

<h3 id="message-filter-and-renderer">Message Filter and Renderer</h3>

<p>Srain provdes regex based message render and filter mechanisms.</p>

<p>Message filter allows ignore one’s message by regular expression match.
(<a href="http://doc.srain.im/en/stable/commands.html#ignore-unignore">Ignore by nickname</a>
is supported of course).
Please refers to <a href="http://doc.srain.im/en/stable/commands.html#commands-filter"><code class="language-plaintext highlighter-rouge">/filter</code></a>.</p>

<p>Message renderer allows user modify one’s message by regular expression group capture.
Please refers to <a href="http://doc.srain.im/en/stable/commands.html#commands-render"><code class="language-plaintext highlighter-rouge">/render</code></a>.</p>

<p><strong>One of the application of message renderer is “relay message transform”</strong>.</p>

<p>There are many relay bots forward messages from other IM to IRC network,
“relay message transform” makes these messages easier to read.
For example, there is a telegram bot named “telegram”, the words in brackets
is the named of the telegram user.</p>

<p><img src="/assets/posts/2020-02-29-introducing-srain/render-message-before.png" /></p>

<p>Run command <code class="language-plaintext highlighter-rouge">/pattern add normal-relay \[(?&lt;sender&gt;[^:]+?)\] (?&lt;content&gt;.*)</code>
and <code class="language-plaintext highlighter-rouge">/render telegram normal-relay</code>.
<code class="language-plaintext highlighter-rouge">\[(?&lt;sender&gt;[^:]+?)\] (?&lt;content&gt;.*)</code> is a regular expression, which has two
named group <code class="language-plaintext highlighter-rouge">sender</code> and <code class="language-plaintext highlighter-rouge">content</code>, when an IRC message matched by this expression:</p>

<ul>
  <li>The text in <code class="language-plaintext highlighter-rouge">sender</code> group will become the sender of rendered messsage,</li>
  <li>The text in <code class="language-plaintext highlighter-rouge">content</code> group will become the content of rendered messsage.</li>
  <li>The orginal message sender will become the remark of rendered messsage.</li>
</ul>

<p>The meaning of first command is creating a pattern(regular expression) named
“normal-relay”, the second command applies this pattern to the bot “telegram”:
all message sent by this bot will be rendered by the aboved pattern.</p>

<p>So, after running the commands, the message from “telegram” looks like the
following figure:</p>

<p><img src="/assets/posts/2020-02-29-introducing-srain/render-message-after.png" /></p>

<h2 id="next-development">Next development</h2>

<p>The two main aims of next development are: use experience improvement and plugin system.</p>

<h3 id="use-experience-improvement">Use Experience Improvement</h3>

<p>In most cases, Srain has better user experience than previous clients, but
still has some shortcomings – which will be improved the future.</p>

<p>The improvement of use experience is strongly based on user’s feedback.
If you have any suggestion, please <a href="https://github.com/SrainApp/srain/issue">file an issue</a>
or <a href="ircs://chat.freenode.net/#srain">disscuss in channel #srain</a>.</p>

<h3 id="plugin-system">Plugin System</h3>

<p>Traditional IRC protocol is too simple to meet the needs of modern IM users.
So client should do more, plugin system is a good idea to provide extra functions.</p>

<p>As Srain is a GTK application, I plan to use <a href="https://wiki.gnome.org/Projects/Libpeas">Libpeas</a>
to construct Srain’s plugin system and provide at least tow kind of plugin:
auto-pastebin(paste your file/image and return URL to your input entry) and
message renderer(render IRC message as as you wish).</p>

<p>You can trace the progress of plugin system at <a href="https://github.com/SrainApp/srain/issues/199">#199</a>
.</p>

<h3 id="energy-and-time">Energy and Time</h3>

<p>In fact, I am quite busy with both my work and my life, so I can only develop
Srain in my free time. The progress of development may not be too fast,
but it will continue.  If anyone wants to get involved, feel free to contcat me,
you can find contact details on <a href="https://silverrainz.me/">my homepage</a>.</p>

    </div>
</main>

<!-- Orihttps://github.com/aristath/aristath.github.com/blob/master/_includes/comments.html -->
<script src="https://unpkg.com/showdown/dist/showdown.min.js"></script>
<script>
const GH_API_URL = 'https://api.github.com/repos/SrainApp/srain.im/issues/4/comments'; // ?client_id=&client_secret=

let request = new XMLHttpRequest();
request.open( 'GET', GH_API_URL, true );
request.onload = function() {
	if ( this.status >= 200 && this.status < 400 ) {
		let response = JSON.parse( this.response );

		for ( var i = 0; i < response.length; i++ ) {
			document.getElementById( 'gh-comments-list' ).appendChild( createCommentEl( response[ i ] ) );
		}

		if ( 0 === response.length ) {
			document.getElementById( 'no-comments-found' ).style.display = 'block';
		}
	} else {
		console.error( this );
	}
};

function createCommentEl( response ) {
	let user = document.createElement( 'a' );
	user.setAttribute( 'href', response.user.url.replace( 'api.github.com/users', 'github.com' ) );
	user.classList.add( 'user' );

	let userAvatar = document.createElement( 'img' );
	userAvatar.classList.add( 'avatar' );
	userAvatar.setAttribute( 'src', response.user.avatar_url );

	user.appendChild( userAvatar );

	let commentLink = document.createElement( 'a' );
	commentLink.setAttribute( 'href', response.html_url );
	commentLink.classList.add( 'comment-url' );
	commentLink.innerHTML = '#' + response.id + ' - ' + response.created_at;

	let commentContents = document.createElement( 'div' );
	commentContents.classList.add( 'comment-content' );
	commentContents.innerHTML = response.body;
	// Progressive enhancement.
	if ( window.showdown ) {
		let converter = new showdown.Converter();
		commentContents.innerHTML = converter.makeHtml( response.body );
	}

	let comment = document.createElement( 'li' );
	comment.setAttribute( 'data-created', response.created_at );
	comment.setAttribute( 'data-author-avatar', response.user.avatar_url );
	comment.setAttribute( 'data-user-url', response.user.url );

	comment.appendChild( user );
	comment.appendChild( commentContents );
	comment.appendChild( commentLink );

	return comment;
}
request.send();
</script>

<hr>

<div class="github-comments container">
    <h2>Comments</h2>
    <div>
        <ul id="gh-comments-list" class="list-unstyled"></ul>
        <p id="no-comments-found">No comments found for this article.</p>
        <p id="leave-a-comment">Join the discussion for this article on <a href="https://github.com/SrainApp/srain.im/issues/4">this ticket</a>. Comments appear on this page instantly.</p>
    </div>
</div>


<nav aria-label="...">
    <div class="container">
        <ul class="pager">
            
            <li class="previous disabled"><a href="#"><span aria-hidden="true">&larr;</span> Nothing</a></li>
            

            
            <li class="next disabled"><a href="#"><span aria-hidden="true">&rarr;</span> Nothing</a></li>
            
        </ul>
    </div>
</nav>


        <footer class="footer">
            <div class="container">
                <p class="text-muted">2016 - 2022 ©
                <a href="https://github.com/SrainApp">SrainApp</a>
                | Powered by <a href="https://jekyllrb.com/">Jekyll</a>
                &amp; <a href="https://github.com/SilverRainZ/jekyll-hg">Jekyll HG</a>
                &amp; <a href="https://getbootstrap.com/">Bootstrap</a>
                </p>
            </div>
        </footer>

        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script src="/assets/jqurey/1.12.4/jquery.min.js "></script>
        <!-- Include all compiled plugins (below), or include individual files as needed -->
        <script src="/assets/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    </body>

    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-87388334-4"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-87388334-4');
</script>


</html>
